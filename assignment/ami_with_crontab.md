# AMI with crontab

이번 lab의 목적은 앞서 우리가 배운 crontab과 ami를 잘 사용해서 이미지 백업과 복구를 자동화하는 서비스를 구성하고자 합니다. 앞단에 비해서는 상당히 레벨이 있을 수 있습니다.

## Problmes
### 웹 어플리케이션 AMI 생성하기
가장 쉬운 미션입니다. 기존 강의대로 EC2를 생성한 후 AMI를 생성합니다. 단, 이때 출력되는 글자는 "Hello, 당신의 이름" 형태로 예를 들면 "Hello, Sungchul"식으로 출력될 수 있도록 만들어줍니다. 생성된 AMI를 사용하여 웹 어플리케이션을 작동시킵니다.


### crontab 서버 생성 
다음으로 crontab 서버를 생성합니다. 생성된 서버는 아래와 같은 업무를 수행합니다.

- 매3분 동작중인 웹 어플리케이션의 이미지를 생성합니다. 생성을 위해서는 ami 이미지 정보를 사전에 txt 파일 등에 저장해 놓아야 합니다.
- 매10분마다 기존에 동작중인 웹 어플리케이션 EC2를 중지시키고, 가장 최신에 생성된 AMI파일로 새롭게 EC2 서버를 생성합니다.
- 생성되는 모든 과정과 이미지 저장 정보는 log파일에 기록을 남깁니다.
- 생성되는 로그그 파일은 매25분마다 s3에 저장합니다. 이때 저장시 저장되는 파일명은 현재 `시간+ 로그 파일.log` 파일 형태로 하고 저장후 기존 로그 파일은 crontab 서버에서 삭제합니다.

### formation 코드 생성
한번 실행으로 위 두 서버를 한꺼번에 생성하고 crontab이 실행될 수 있도록 합니다. 이후 구현 확인을 위해 아래의 문서를 참고하여 본인이 생성한 AMI를 담당교수에게 공유할 수 있도록 합니다.

https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/sharingamis-explicit.html

## 의견
어렵습니다. 여러분의 무운을 빕니다.
